<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìµëª… ê³ ë¯¼ìƒë‹´ì†Œ ğŸ’­</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/pretendard/1.3.9/static/pretendard.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #f5f7fa;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            position: relative;
            z-index: 10;
        }
        
        .tab-navigation {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            background: white;
            padding: 10px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .tab-btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
            background: #f5f7fa;
            color: #7f8c8d;
        }
        
        .tab-btn.active {
            background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);
            color: white;
            box-shadow: 0 3px 10px rgba(74, 144, 226, 0.3);
        }
        
        .tab-btn:hover:not(.active) {
            background: #e8ecef;
        }
        
        .game-container {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 15px;
            padding: 30px;
            color: white;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        
        .game-header {
            text-align: center;
            padding: 20px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }
        
        .game-header h2 {
            font-size: 2rem;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            color: #ffd700;
        }
        
        .stage-info {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .stage-number {
            font-size: 1.1rem;
            color: #ffd700;
            margin-bottom: 8px;
        }
        
        .room-description {
            background: rgba(255, 255, 255, 0.08);
            padding: 20px;
            border-radius: 12px;
            margin: 15px 0;
            line-height: 1.7;
            border-left: 4px solid #ffd700;
        }
        
        .puzzle-box {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 12px;
            margin: 15px 0;
            border: 2px solid rgba(255, 215, 0, 0.3);
        }
        
        .puzzle-title {
            font-size: 1.2rem;
            color: #ffd700;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .game-clue {
            background: rgba(100, 200, 255, 0.1);
            padding: 12px;
            border-radius: 8px;
            margin: 12px 0;
            border-left: 3px solid #64c8ff;
        }
        
        .game-input {
            width: 100%;
            padding: 12px;
            font-size: 1rem;
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-family: inherit;
            text-align: center;
            letter-spacing: 2px;
            margin: 10px 0;
        }
        
        .game-input:focus {
            outline: none;
            border-color: #ffd700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
        }
        
        .game-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #1a1a2e;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .game-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 215, 0, 0.4);
        }
        
        .hint-btn {
            padding: 8px 16px;
            background: rgba(100, 200, 255, 0.2);
            border: 1px solid #64c8ff;
            border-radius: 6px;
            color: #64c8ff;
            cursor: pointer;
            font-size: 0.85rem;
            margin: 8px 5px;
            transition: all 0.3s;
        }
        
        .hint-btn:hover {
            background: rgba(100, 200, 255, 0.3);
        }
        
        .game-message {
            text-align: center;
            padding: 12px;
            border-radius: 8px;
            margin: 12px 0;
            font-weight: 500;
        }
        
        .game-message.error {
            background: rgba(255, 50, 50, 0.2);
            border: 1px solid #ff3232;
        }
        
        .game-message.success {
            background: rgba(50, 255, 50, 0.2);
            border: 1px solid #32ff32;
        }
        
        .completion {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2) 0%, rgba(255, 237, 78, 0.2) 100%);
            border-radius: 15px;
            border: 2px solid #ffd700;
            margin: 20px 0;
        }
        
        .completion h3 {
            font-size: 1.8rem;
            color: #ffd700;
            margin-bottom: 15px;
        }
        
        .interactive-object {
            cursor: pointer;
            display: inline;
            padding: 2px 6px;
            background: rgba(255, 215, 0, 0.15);
            border-radius: 4px;
            border-bottom: 1px dashed #ffd700;
            transition: all 0.2s;
        }
        
        .interactive-object:hover {
            background: rgba(255, 215, 0, 0.25);
        }
        
        .items-found {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .item {
            padding: 8px 15px;
            background: rgba(255, 215, 0, 0.2);
            border-radius: 8px;
            border: 1px solid #ffd700;
            font-size: 0.9rem;
        }
        
        .header {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .header h1 {
            font-size: 1.5rem;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .header p {
            opacity: 0.7;
            font-size: 0.9rem;
            color: #7f8c8d;
        }
        
        .form-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
        }
        
        .form-card h2 {
            color: #5a5a5a;
            font-size: 1.1rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nickname-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e8e8e8;
            border-radius: 12px;
            font-size: 0.95rem;
            margin-bottom: 12px;
            transition: all 0.3s;
            font-family: inherit;
        }
        
        .nickname-input:focus {
            outline: none;
            border-color: #4a90e2;
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
        }
        
        textarea {
            width: 100%;
            padding: 16px;
            border: 2px solid #e8e8e8;
            border-radius: 12px;
            font-size: 1rem;
            resize: none;
            height: 120px;
            transition: all 0.3s;
            font-family: inherit;
            line-height: 1.6;
        }
        
        textarea:focus {
            outline: none;
            border-color: #4a90e2;
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
        }
        
        .submit-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s;
            font-family: inherit;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(74, 144, 226, 0.4);
        }
        
        .submit-btn:active {
            transform: translateY(0);
        }
        
        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .confessions-section h2 {
            color: #2c3e50;
            font-size: 1.2rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            background: white;
            padding: 15px 20px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .confession-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .confession-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .confession-nickname {
            font-weight: 600;
            color: #4a90e2;
            font-size: 0.9rem;
        }
        
        .confession-time {
            font-size: 0.8rem;
            color: #999;
        }
        
        .confession-content {
            color: #444;
            line-height: 1.7;
            font-size: 0.95rem;
            white-space: pre-wrap;
            word-break: break-word;
        }
        
        .confession-footer {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }
        
        .reaction-btn {
            padding: 6px 14px;
            border: none;
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
            background: #f5f5f5;
            font-family: inherit;
        }
        
        .reaction-btn:hover {
            background: #eee;
            transform: scale(1.05);
        }
        
        .empty-state {
            text-align: center;
            color: #7f8c8d;
            padding: 40px 20px;
            font-size: 1rem;
            background: white;
            border-radius: 12px;
        }
        
        .char-count {
            text-align: right;
            font-size: 0.8rem;
            color: #999;
            margin-top: 8px;
        }
        
        .success-toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #4CAF50;
            color: white;
            padding: 12px 24px;
            border-radius: 30px;
            font-weight: 500;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            animation: toastIn 0.3s ease;
            z-index: 1000;
        }
        
        @keyframes toastIn {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }
        
        .category-select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e8e8e8;
            border-radius: 12px;
            font-size: 0.95rem;
            margin-bottom: 12px;
            background: white;
            cursor: pointer;
            font-family: inherit;
        }
        
        .category-select:focus {
            outline: none;
            border-color: #4a90e2;
        }
        
        .category-tag {
            display: inline-block;
            padding: 4px 10px;
            background: linear-gradient(135deg, rgba(74, 144, 226, 0.15) 0%, rgba(196, 69, 105, 0.15) 100%);
            color: #4a90e2;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
            margin-left: 10px;
        }
        
        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .stat-item {
            text-align: center;
            color: #2c3e50;
        }
        
        .stat-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: #4a90e2;
        }
        
        .stat-label {
            font-size: 0.8rem;
            opacity: 0.7;
            color: #7f8c8d;
        }
        
        .loading {
            text-align: center;
            color: #2c3e50;
            padding: 40px;
            font-size: 1.1rem;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .comment-btn {
            padding: 6px 14px;
            border: 2px solid #4a90e2;
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
            background: white;
            color: #4a90e2;
            font-family: inherit;
            font-weight: 500;
            margin-left: auto;
        }
        
        .comment-btn:hover {
            background: #4a90e2;
            color: white;
        }
        
        .comments-section {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e8e8e8;
        }
        
        .comment-input-box {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .comment-input {
            flex: 1;
            padding: 10px 14px;
            border: 2px solid #e8e8e8;
            border-radius: 12px;
            font-size: 0.9rem;
            font-family: inherit;
            transition: all 0.3s;
        }
        
        .comment-input:focus {
            outline: none;
            border-color: #4a90e2;
        }
        
        .comment-submit-btn {
            padding: 10px 20px;
            background: #4a90e2;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 0.9rem;
            cursor: pointer;
            font-family: inherit;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        .comment-submit-btn:hover {
            background: #357abd;
        }
        
        .comment-submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .comment-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .comment-item {
            padding: 12px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
        }
        
        .comment-nickname {
            font-weight: 600;
            color: #4a90e2;
            font-size: 0.85rem;
        }
        
        .comment-time {
            font-size: 0.75rem;
            color: #999;
        }
        
        .comment-content {
            color: #555;
            font-size: 0.9rem;
            line-height: 1.5;
            word-break: break-word;
        }
        
        .no-comments {
            text-align: center;
            color: #999;
            font-size: 0.85rem;
            padding: 10px;
        }
        
        .password-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(74, 144, 226, 0.95) 0%, rgba(53, 122, 189, 0.95) 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 99999;
        }
        
        .password-box {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center;
            max-width: 400px;
            width: 90%;
        }
        
        .password-box h2 {
            color: #4a90e2;
            margin-bottom: 10px;
            font-size: 1.5rem;
        }
        
        .password-hint {
            color: #999;
            font-size: 0.9rem;
            margin-bottom: 25px;
        }
        
        .password-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e8e8e8;
            border-radius: 12px;
            font-size: 1.2rem;
            text-align: center;
            letter-spacing: 8px;
            font-family: inherit;
            margin-bottom: 15px;
            transition: all 0.3s;
        }
        
        .password-input:focus {
            outline: none;
            border-color: #4a90e2;
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
        }
        
        .password-submit {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
        }
        
        .password-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(74, 144, 226, 0.4);
        }
        
        .password-error {
            color: #ff4444;
            font-size: 0.85rem;
            margin-top: 10px;
            min-height: 20px;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script>
        // Firebase ì„¤ì •
        const firebaseConfig = {
            apiKey: "AIzaSyDh3FsyWVZqy8wGExv-IlAglJ0DERuW_T8",
            authDomain: "ccccc-74256.firebaseapp.com",
            databaseURL: "https://ccccc-74256-default-rtdb.firebaseio.com",
            projectId: "ccccc-74256",
            storageBucket: "ccccc-74256.firebasestorage.app",
            messagingSenderId: "1086870817114",
            appId: "1:1086870817114:web:8fb533c96f3402bfe78b63"
        };
        
        // Firebase ì´ˆê¸°í™”
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const confessionsRef = database.ref('confessions');
    </script>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        function App() {
            const [confessions, setConfessions] = useState([]);
            const [nickname, setNickname] = useState('');
            const [content, setContent] = useState('');
            const [category, setCategory] = useState('ì¼ë°˜');
            const [showToast, setShowToast] = useState(false);
            const [isLoading, setIsLoading] = useState(true);
            const [openComments, setOpenComments] = useState({});
            const [commentInputs, setCommentInputs] = useState({});
            const [passwordVerified, setPasswordVerified] = useState(false);
            const [passwordInput, setPasswordInput] = useState('');
            const [passwordError, setPasswordError] = useState('');
            
            // íƒ­ ìƒíƒœ
            const [activeTab, setActiveTab] = useState('board');
            
            // ê²Œì„ ìƒíƒœ
            const [gameStage, setGameStage] = useState(1);
            const [gameHints, setGameHints] = useState(0);
            const [gameItems, setGameItems] = useState([]);
            const [gameAnswer, setGameAnswer] = useState('');
            const [gameMessage, setGameMessage] = useState({ text: '', type: '' });
            const [gameStartTime] = useState(Date.now());
            const [gameCompleted, setGameCompleted] = useState(false);
            
            const CORRECT_PASSWORD = '4485';
            
            const categories = ['ì¼ë°˜', 'ì—°ì• ', 'ì§„ë¡œ', 'ì¸ê°„ê´€ê³„', 'ê°€ì¡±', 'ê¸°íƒ€'];
            
            // ê²Œì„ ë°ì´í„°
            const gameAnswers = {
                1: "317",
                2: "ê±°ìš¸",
                3: "ì—ë°€ë¦¬",
                4: "ë…ì•½",
                5: "ìœŒë¦¬ì—„ë°•ì‚¬"
            };
            
            const gameHintData = {
                1: [
                    "ì¼ê¸°ì¥ì˜ ë‚ ì§œë“¤ì„ ìì„¸íˆ ë³´ì„¸ìš”. 3ì›”, 1ì›”, 7ì›”...",
                    "ê° ë‹¬ì˜ ìˆ«ìë¥¼ ì—°ê²°í•˜ë©´? 3-1-7",
                    "ë‹µ: 317"
                ],
                2: [
                    "\"ë‚´ ëª¨ìŠµì´ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤\"ëŠ” ë¬´ì—‡ì„ ì˜ë¯¸í• ê¹Œìš”?",
                    "ìì‹ ì˜ ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆëŠ” ë¬¼ê±´ì´ì§€ë§Œ ê¹¨ì¡Œë‹¤ë©´?",
                    "ë‹µ: ê±°ìš¸"
                ],
                3: [
                    "ê° í™˜ìì˜ ì¦ìƒê³¼ ì¼ê¸°ë¥¼ ëŒ€ì¡°í•´ë³´ì„¸ìš”.",
                    "\"ë‚˜ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤\"ê³  ë¯¿ëŠ” ì¦ìƒì€ ì½”íƒ€ë¥´ ì¦í›„êµ°ì…ë‹ˆë‹¤.",
                    "ë‹µ: ì—ë°€ë¦¬"
                ],
                4: [
                    "í™˜ìë“¤ì˜ ì‚¬ë§ ê¸°ë¡ì„ ë³´ì„¸ìš”. ê³µí†µì ì´ ìˆìŠµë‹ˆë‹¤.",
                    "ëª¨ë‘ ì‹ì‚¬ í›„ 30ë¶„ ì´ë‚´ì— ì‚¬ë§í–ˆìŠµë‹ˆë‹¤.",
                    "ë‹µ: ë…ì•½"
                ],
                5: [
                    "ëˆ„ê°€ ì•½ë¬¼ì— ì ‘ê·¼í•  ìˆ˜ ìˆì—ˆì„ê¹Œìš”?",
                    "ì²˜ë°©ì „ê³¼ ì„œëª…ì„ í™•ì¸í•˜ì„¸ìš”.",
                    "ë‹µ: ìœŒë¦¬ì—„ë°•ì‚¬"
                ]
            };
            
            const gameStages = {
                1: {
                    title: "ì„œë§‰: ë²„ë ¤ì§„ ì •ì‹ ë³‘ì›",
                    description: `
                        <div style="line-height: 1.8;">
                        1987ë…„ 10ì›” 31ì¼, ì„¸ì¸íŠ¸ ë©”ë¦¬ ì •ì‹ ë³‘ì›ì—ì„œ 7ëª…ì˜ í™˜ìê°€ ì˜ë¬¸ì˜ ì£½ìŒì„ ë§ì´í–ˆìŠµë‹ˆë‹¤.<br/>
                        ì‚¬ê±´ ì§í›„ ë³‘ì›ì€ íì‡„ë˜ì—ˆê³ , ì§„ì‹¤ì€ ì–´ë‘  ì†ì— ë¬»í˜”ìŠµë‹ˆë‹¤.<br/><br/>
                        
                        ë‹¹ì‹ ì€ ì‹¤ì¢…ëœ ì¹œêµ¬ë¥¼ ì°¾ì•„ ì´ê³³ì— ë“¤ì–´ì™”ìŠµë‹ˆë‹¤.<br/>
                        í•˜ì§€ë§Œ ì…êµ¬ ë¬¸ì´ ë’¤ì—ì„œ ì ê²¼ìŠµë‹ˆë‹¤. <span style="color: #ff6b6b;">ë‹¹ì‹ ì€ í˜¼ìê°€ ì•„ë‹™ë‹ˆë‹¤.</span><br/><br/>
                        
                        <div style="background: rgba(255,50,50,0.1); padding: 15px; border-radius: 8px; border-left: 3px solid #ff3232; margin: 15px 0;">
                        ë³µë„ ëì—ì„œ ë¬´ì–¸ê°€ ì›€ì§ì´ëŠ” ì†Œë¦¬ê°€ ë“¤ë¦½ë‹ˆë‹¤.<br/>
                        ë²½ì—ëŠ” ë¶‰ì€ìƒ‰ìœ¼ë¡œ "317"ì´ë¼ëŠ” ìˆ«ìê°€ ê¸í˜€ìˆìŠµë‹ˆë‹¤.
                        </div>
                        
                        <b>íƒìƒ‰ ê°€ëŠ¥í•œ ì¥ì†Œ:</b><br/>
                        â€¢ ì ‘ìˆ˜ì²˜ - ì˜¤ë˜ëœ ì„œë¥˜ë“¤ì´ í©ì–´ì ¸ ìˆìŠµë‹ˆë‹¤<br/>
                        â€¢ ë³µë„ - í™˜ì ë°©ë“¤ì´ ì¤„ì§€ì–´ ìˆìŠµë‹ˆë‹¤<br/>
                        â€¢ ê°„í˜¸ì‚¬ì‹¤ - ì˜ë£Œ ê¸°ë¡ì´ ë³´ê´€ë˜ì–´ ìˆìŠµë‹ˆë‹¤
                        </div>
                    `,
                    clue: "ì ‘ìˆ˜ì²˜ ì„œëì—ì„œ í™˜ì ì¼ì§€ë¥¼ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. 3ê°œì˜ ë‚ ì§œê°€ ë¶‰ì€ íœìœ¼ë¡œ í‘œì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤: 3ì›” 17ì¼, 1ì›” 3ì¼, 7ì›” 31ì¼. ì´ ë‚ ì§œë“¤ì€ ëª¨ë‘ í™˜ìë“¤ì´ ì‚¬ë¼ì§„ ë‚ ì…ë‹ˆë‹¤.",
                    question: "ë²½ì— ì“°ì¸ 317ì€ ë¬´ì—‡ì„ ì˜ë¯¸í•©ë‹ˆê¹Œ? (íŒíŠ¸: ë‚ ì§œì™€ ê´€ë ¨ì´ ìˆìŠµë‹ˆë‹¤)",
                    evidence: "ğŸ“‹ ì¦ê±° #1: í™˜ì ì¼ì§€ - ì˜ë¬¸ì˜ ë‚ ì§œë“¤"
                },
                2: {
                    title: "1ë‹¨ê³„: 317í˜¸ì‹¤ì˜ ë¹„ë°€",
                    description: `
                        <div style="line-height: 1.8;">
                        317í˜¸ì‹¤ ë¬¸ì„ ì—´ì ì°¨ê°€ìš´ ê³µê¸°ê°€ ìŸì•„ì ¸ ë‚˜ì˜µë‹ˆë‹¤.<br/>
                        ë°© ì•ˆì€ íí—ˆê°€ ë˜ì—ˆì§€ë§Œ, ë²½ì—ëŠ” í™˜ìê°€ ë‚¨ê¸´ í”ì ë“¤ì´...<br/><br/>
                        
                        <div style="background: rgba(255,50,50,0.1); padding: 15px; border-radius: 8px; border-left: 3px solid #ff3232; margin: 15px 0;">
                        ë²½ì— í”¼ë¡œ ì“°ì—¬ì§„ ê¸€:<br/>
                        "ë‚´ ëª¨ìŠµì´ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤. ë‚˜ëŠ” ì£½ì—ˆë‹¤. í•˜ì§€ë§Œ ì›€ì§ì¸ë‹¤."<br/>
                        "ê·¸ê²ƒì€ ê¹¨ì¡Œë‹¤. ì§„ì‹¤ë„ í•¨ê»˜ ê¹¨ì¡Œë‹¤."
                        </div>
                        
                        ì¹¨ëŒ€ ì•„ë˜ì—ì„œ ê¹¨ì§„ ë¬¼ê±´ì˜ íŒŒí¸ë“¤ì„ ë°œê²¬í•©ë‹ˆë‹¤.<br/>
                        ë°”ë‹¥ì— í©ì–´ì§„ ì‚¬ì§„ í•œ ì¥ - ì Šì€ ì—¬ì„±ê³¼ ë‚¨ì, ê·¸ë¦¬ê³  ì˜ì‚¬.<br/><br/>
                        
                        ì‚¬ì§„ ë’·ë©´ì˜ ë©”ëª¨:<br/>
                        <i>"1987ë…„ 3ì›” - ì—ë°€ë¦¬, ì œì„ìŠ¤, ê·¸ë¦¬ê³  ìœŒë¦¬ì—„ ë°•ì‚¬"</i><br/><br/>
                        
                        <b>íƒìƒ‰ ì˜µì…˜:</b><br/>
                        â€¢ ì¹¨ëŒ€ ë°‘ ì¡°ì‚¬ - ë” ë§ì€ ì¦ê±°ê°€ ìˆì„ì§€ë„<br/>
                        â€¢ ìš•ì‹¤ í™•ì¸ - ë¬´ì–¸ê°€ ìˆ¨ê²¨ì ¸ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤<br/>
                        â€¢ ì°½ë¬¸ ì¡°ì‚¬ - íƒˆì¶œêµ¬ê°€ ìˆì„ê¹Œìš”?
                        </div>
                    `,
                    clue: "ìš•ì‹¤ì—ì„œ ê¹¨ì§„ ë¬¼ê±´ì˜ ë‚˜ë¨¸ì§€ íŒŒí¸ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤. ì€ë¹› í”„ë ˆì„ì˜ í”ì ... ì´ê²ƒì€ í•œë•Œ ì•„ë¦„ë‹¤ìš´ ë¬¼ê±´ì´ì—ˆìŠµë‹ˆë‹¤. í™˜ìëŠ” ìì‹ ì˜ ëª¨ìŠµì„ ë³¼ ìˆ˜ ì—†ë‹¤ê³  í–ˆìŠµë‹ˆë‹¤.",
                    question: "ë²½ì˜ ë©”ì‹œì§€ëŠ” ë¬´ì—‡ì„ ê°€ë¦¬í‚¤ê³  ìˆìŠµë‹ˆê¹Œ? (ê¹¨ì§„ ë¬¼ê±´ì˜ ì´ë¦„)",
                    evidence: "ğŸ“¸ ì¦ê±° #2: ì‚¬ì§„ê³¼ ê¹¨ì§„ ë¬¼ê±´ì˜ íŒŒí¸"
                },
                3: {
                    title: "2ë‹¨ê³„: í™˜ì ê¸°ë¡ì‹¤",
                    description: `
                        <div style="line-height: 1.8;">
                        ë³µë„ë¥¼ ë”°ë¼ ë‚´ë ¤ê°€ì ê°„í˜¸ì‚¬ì‹¤ ë¬¸ì´ ë°˜ì¯¤ ì—´ë ¤ìˆìŠµë‹ˆë‹¤.<br/>
                        ì•ˆì—ëŠ” í™˜ìë“¤ì˜ ì˜ë£Œ ê¸°ë¡ì´ ìºë¹„ë‹›ì— ë³´ê´€ë˜ì–´ ìˆìŠµë‹ˆë‹¤.<br/><br/>
                        
                        <div style="background: rgba(100,50,200,0.1); padding: 15px; border-radius: 8px; border-left: 3px solid #6432c8; margin: 15px 0;">
                        <b>í™˜ì íŒŒì¼:</b><br/><br/>
                        
                        <b>317í˜¸ - ì—ë°€ë¦¬ ë¡œì¦ˆ (27ì„¸)</b><br/>
                        ì¦ìƒ: ì½”íƒ€ë¥´ ì¦í›„êµ° (ìì‹ ì´ ì£½ì—ˆë‹¤ê³  ë¯¿ìŒ)<br/>
                        ì…ì›ì¼: 1987ë…„ 1ì›” 3ì¼<br/>
                        íŠ¹ì´ì‚¬í•­: ê±°ìš¸ì„ ë³´ëŠ” ê²ƒì„ ê±°ë¶€í•¨<br/><br/>
                        
                        <b>318í˜¸ - ì œì„ìŠ¤ ì¹´í„° (35ì„¸)</b><br/>
                        ì¦ìƒ: ì¡°í˜„ë³‘, í”¼í•´ë§ìƒ<br/>
                        ì…ì›ì¼: 1987ë…„ 2ì›” 14ì¼<br/>
                        íŠ¹ì´ì‚¬í•­: "ì˜ì‚¬ë“¤ì´ ë‚˜ë¥¼ ì£½ì´ë ¤ í•œë‹¤"ê³  ì£¼ì¥<br/><br/>
                        
                        <b>319í˜¸ - ë§ˆë¦¬ì•„ ì„ ì¦ˆ (42ì„¸)</b><br/>
                        ì¦ìƒ: ì‹¬ê°í•œ ìš°ìš¸ì¦<br/>
                        ì…ì›ì¼: 1986ë…„ 12ì›” 1ì¼<br/>
                        íŠ¹ì´ì‚¬í•­: ìí•´ ì‹œë„ ì—¬ëŸ¬ ë²ˆ
                        </div>
                        
                        ì„œëì—ì„œ ì†ìœ¼ë¡œ ì“´ ì¼ê¸°ì¥ì„ ë°œê²¬í•©ë‹ˆë‹¤:<br/>
                        <i>"ë‚˜ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ë‚´ ì‹¬ì¥ì€ ë›°ì§€ ì•ŠëŠ”ë‹¤.<br/>
                        í•˜ì§€ë§Œ ê·¸ë“¤ì€ ë‚´ê²Œ ì•½ì„ ë¨¹ì¸ë‹¤. ì™œ? ì£½ì€ ìì—ê²Œ ì•½ì´ í•„ìš”í•œê°€?"</i><br/><br/>
                        
                        <b>ì„ íƒ:</b><br/>
                        â€¢ ì—ë°€ë¦¬ì˜ ë°© ì¬ì¡°ì‚¬<br/>
                        â€¢ ì œì„ìŠ¤ì˜ ë°© ì¡°ì‚¬<br/>
                        â€¢ ë§ˆë¦¬ì•„ì˜ ë°© ì¡°ì‚¬
                        </div>
                    `,
                    clue: "ì¼ê¸°ì˜ í•„ì²´ë¥¼ ì‚¬ì§„ ì† ì¸ë¬¼ë“¤ê³¼ ëŒ€ì¡°í–ˆìŠµë‹ˆë‹¤. ì´ ì¼ê¸°ëŠ” 'ìì‹ ì´ ì£½ì—ˆë‹¤ê³  ë¯¿ëŠ”' í™˜ìê°€ ì¼ìŠµë‹ˆë‹¤. ì½”íƒ€ë¥´ ì¦í›„êµ°ì˜ íŠ¹ì§•ì…ë‹ˆë‹¤.",
                    question: "ì¼ê¸°ë¥¼ ì“´ ì‚¬ëŒì€ ëˆ„êµ¬ì…ë‹ˆê¹Œ? (ì´ë¦„ë§Œ)",
                    evidence: "ğŸ“” ì¦ê±° #3: í™˜ìì˜ ì¼ê¸°ì™€ ì˜ë£Œ ê¸°ë¡"
                },
                4: {
                    title: "3ë‹¨ê³„: ì§€í•˜ì‹¤ì˜ ì§„ì‹¤",
                    description: `
                        <div style="line-height: 1.8;">
                        ê°„í˜¸ì‚¬ì‹¤ ë’¤í¸ì—ì„œ ì§€í•˜ë¡œ ê°€ëŠ” ê³„ë‹¨ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤.<br/>
                        <span style="color: #ff6b6b;">ì‚ê±±ê±°ë¦¬ëŠ” ì†Œë¦¬ì™€ í•¨ê»˜ ëˆ„êµ°ê°€ì˜ ë°œìêµ­ ì†Œë¦¬ê°€ ë“¤ë¦½ë‹ˆë‹¤.</span><br/><br/>
                        
                        ì§€í•˜ì‹¤ì—ëŠ” ë³‘ì›ì˜ ì–´ë‘ìš´ ë¹„ë°€ì´ ìˆ¨ê²¨ì ¸ ìˆìŠµë‹ˆë‹¤.<br/>
                        ë²½ì— ê±¸ë¦° í™”ì´íŠ¸ë³´ë“œì— í™˜ìë“¤ì˜ ì‚¬ë§ ì‹œê°„ì´ ê¸°ë¡ë˜ì–´ ìˆìŠµë‹ˆë‹¤:<br/><br/>
                        
                        <div style="background: rgba(255,50,50,0.1); padding: 15px; border-radius: 8px; border-left: 3px solid #ff3232; margin: 15px 0;">
                        <b>ì‚¬ë§ ê¸°ë¡ - 1987ë…„ 10ì›” 31ì¼:</b><br/><br/>
                        
                        19:30 - ì €ë… ì‹ì‚¬ ì œê³µ<br/>
                        20:15 - ì—ë°€ë¦¬ ë¡œì¦ˆ ì‚¬ë§<br/>
                        20:18 - ì œì„ìŠ¤ ì¹´í„° ì‚¬ë§<br/>
                        20:20 - ë§ˆë¦¬ì•„ ì„ ì¦ˆ ì‚¬ë§<br/>
                        20:25 - ê¸°íƒ€ í™˜ì 4ëª… ì‚¬ë§<br/><br/>
                        
                        <span style="color: #ff3232;">ê³µí†µì : ëª¨ë‘ ì‹ì‚¬ í›„ 45ë¶„ ì´ë‚´</span>
                        </div>
                        
                        ì±…ìƒ ì„œëì—ì„œ ì•½ë¬¼ ì²˜ë°© ê¸°ë¡ì„ ë°œê²¬í•©ë‹ˆë‹¤:<br/>
                        ëŒ€ëŸ‰ì˜ ìˆ˜ë©´ì œ, ì§„ì •ì œ, ê·¸ë¦¬ê³ ... ì •ì²´ë¶ˆëª…ì˜ ì•½ë¬¼ "Compound X"<br/><br/>
                        
                        ë²½ì— ê±¸ë¦° ë©”ëª¨:<br/>
                        <i>"í™˜ìë“¤ì´ ì•Œì•„ì„œëŠ” ì•ˆ ëœë‹¤. ì‹¤í—˜ì€ ê³„ì†ë˜ì–´ì•¼ í•œë‹¤.<br/>
                        ë¶€ì‘ìš©ì€ ì˜ˆìƒ ë²”ìœ„ ë‚´ë‹¤. - W.H."</i><br/><br/>
                        
                        <b>ë°œê²¬í•œ ì¦ê±°:</b><br/>
                        â€¢ ë¹ˆ ì•½ë³‘ë“¤<br/>
                        â€¢ ì£¼ì‚¬ê¸°<br/>
                        â€¢ í™”í•™ ë¬¼ì§ˆ ëª©ë¡
                        </div>
                    `,
                    clue: "ì‹ì‚¬ í›„ ëª¨ë‘ ê°™ì€ ì‹œê°„ëŒ€ì— ì‚¬ë§í–ˆìŠµë‹ˆë‹¤. ìŒì‹ì— ë¬´ì–¸ê°€ ì„ì˜€ì„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ì•½ë¬¼ ì²˜ë°© ê¸°ë¡ì„ ë³´ë‹ˆ ì •ìƒì ì¸ ì¹˜ë£Œì œê°€ ì•„ë‹Œ ê²ƒë“¤ì´ ë‹¤ìˆ˜ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.",
                    question: "í™˜ìë“¤ì„ ì£½ì¸ ê²ƒì€ ë¬´ì—‡ì…ë‹ˆê¹Œ? (ë°©ë²•)",
                    evidence: "ğŸ’‰ ì¦ê±° #4: ì‚¬ë§ ê¸°ë¡ê³¼ ì•½ë¬¼ ëª©ë¡"
                },
                5: {
                    title: "ìµœì¢…: ë²”ì¸ì„ ì°¾ì•„ë¼",
                    description: `
                        <div style="line-height: 1.8;">
                        ë‹¹ì‹ ì€ ì´ì œ ëª¨ë“  ì¦ê±°ë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.<br/>
                        ê°‘ìê¸° ë’¤ì—ì„œ ë¬¸ì´ ë‹«íˆëŠ” ì†Œë¦¬ê°€ ë“¤ë¦½ë‹ˆë‹¤.<br/><br/>
                        
                        <span style="color: #ff6b6b; font-size: 1.1rem;">
                        "ì˜ ì°¾ì•˜êµ°ìš”. í•˜ì§€ë§Œ ë‹¹ì‹ ì€ ë„ˆë¬´ ë§ì´ ì•Œì•„ë²„ë ¸ì–´ìš”."
                        </span><br/><br/>
                        
                        ì–´ë‘  ì†ì—ì„œ ëˆ„êµ°ê°€ê°€ ë‹¤ê°€ì˜µë‹ˆë‹¤.<br/>
                        ì†ì „ë“±ì„ ì¼œì í° ê°€ìš´ì„ ì…ì€ ë‚¨ìê°€ ë³´ì…ë‹ˆë‹¤.<br/><br/>
                        
                        <div style="background: rgba(255,50,50,0.15); padding: 20px; border-radius: 10px; border: 2px solid #ff3232; margin: 20px 0;">
                        <b>ìµœì¢… ì¦ê±° ì •ë¦¬:</b><br/><br/>
                        
                        ğŸ“‹ í™˜ì ì¼ì§€ì˜ ë‚ ì§œ ì•”í˜¸ (317)<br/>
                        ğŸ“¸ ì‚¬ì§„ ì† ì„¸ ì‚¬ëŒ: ì—ë°€ë¦¬, ì œì„ìŠ¤, ìœŒë¦¬ì—„ ë°•ì‚¬<br/>
                        ğŸ“” ì—ë°€ë¦¬ì˜ ì¼ê¸° - ê°•ì œ íˆ¬ì•½ì— ëŒ€í•œ ê¸°ë¡<br/>
                        ğŸ’‰ ë…ì•½ì´ ì„ì¸ ì‹ì‚¬<br/>
                        ğŸ“ "W.H." ì„œëª…ì´ ìˆëŠ” ë©”ëª¨<br/><br/>
                        
                        <b>ìš©ì˜ì:</b><br/>
                        â€¢ ìœŒë¦¬ì—„ í—¤ì´ìŠ¤íŒ…ìŠ¤ ë°•ì‚¬ (W.H.) - ë³‘ì›ì¥<br/>
                        â€¢ ì œë‹ˆí¼ ë¸Œë¼ìš´ ê°„í˜¸ì‚¬ì¥<br/>
                        â€¢ ë°ì´ë¹„ë“œ ë¦¬ ê²½ë¹„ì›<br/>
                        â€¢ ë¯¸í™•ì¸ ì™¸ë¶€ì¸
                        </div>
                        
                        ë‹¹ì‹ ì—ê²ŒëŠ” ë‹¨ í•œ ë²ˆì˜ ê¸°íšŒë§Œ ìˆìŠµë‹ˆë‹¤.<br/>
                        <b style="color: #ffd700;">ëˆ„ê°€ 7ëª…ì˜ í™˜ìë¥¼ ì‚´í•´í–ˆìŠµë‹ˆê¹Œ?</b><br/><br/>
                        
                        <span style="color: #ff6b6b; font-size: 0.9rem;">
                        ì˜ëª»ëœ ë‹µì„ ë§í•˜ë©´... ë‹¹ì‹ ë„ ê°™ì€ ìš´ëª…ì„ ë§ê²Œ ë  ê²ƒì…ë‹ˆë‹¤.
                        </span>
                        </div>
                    `,
                    clue: "ì•½ë¬¼ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì‚¬ëŒì€ ì œí•œì ì…ë‹ˆë‹¤. ì„œëª… 'W.H.'ëŠ” William Hastingsë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ì‚¬ì§„ ì† 'ìœŒë¦¬ì—„ ë°•ì‚¬'ê°€ ë°”ë¡œ ê·¸ ì‚¬ëŒì…ë‹ˆë‹¤. ê·¸ëŠ” ë¶ˆë²• ì¸ì²´ ì‹¤í—˜ì„ í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.",
                    question: "ë²”ì¸ì˜ ì´ë¦„ì€? (ì´ë¦„+ì§ì±…, ë„ì–´ì“°ê¸° ì—†ì´)",
                    evidence: "ğŸ¯ ìµœì¢… íŒê²°"
                }
            };
            
            // Firebaseì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
            useEffect(() => {
                if (!passwordVerified) return;
                
                const unsubscribe = confessionsRef.on('value', (snapshot) => {
                    const data = snapshot.val();
                    if (data) {
                        const confessionsList = Object.keys(data).map(key => ({
                            id: key,
                            ...data[key]
                        }));
                        // ìµœì‹ ìˆœ ì •ë ¬
                        confessionsList.sort((a, b) => b.timestamp - a.timestamp);
                        setConfessions(confessionsList);
                    } else {
                        setConfessions([]);
                    }
                    setIsLoading(false);
                });
                
                return () => confessionsRef.off('value', unsubscribe);
            }, [passwordVerified]);
            
            const handleSubmit = async () => {
                if (!content.trim()) return;
                
                try {
                    const newConfessionRef = confessionsRef.push();
                    await newConfessionRef.set({
                        nickname: nickname.trim() || 'ìµëª…ì˜ ëˆ„êµ°ê°€',
                        content: content.trim(),
                        category,
                        timestamp: Date.now(),
                        reactions: { hug: 0, cheer: 0, sad: 0 }
                    });
                    
                    setNickname('');
                    setContent('');
                    setCategory('ì¼ë°˜');
                    setShowToast(true);
                    
                    setTimeout(() => setShowToast(false), 2000);
                } catch (error) {
                    console.error('ë“±ë¡ ì‹¤íŒ¨:', error);
                    alert('ê³ ë¯¼ ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                }
            };
            
            const handlePasswordSubmit = () => {
                if (passwordInput === CORRECT_PASSWORD) {
                    setPasswordVerified(true);
                    setPasswordError('');
                } else {
                    setPasswordError('ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤ ğŸ˜¢');
                    setPasswordInput('');
                }
            };
            
            const handleReaction = async (id, type) => {
                try {
                    const confession = confessions.find(c => c.id === id);
                    if (!confession) return;
                    
                    const updates = {};
                    updates[`/confessions/${id}/reactions/${type}`] = confession.reactions[type] + 1;
                    await database.ref().update(updates);
                } catch (error) {
                    console.error('ë°˜ì‘ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
                }
            };
            
            const toggleComments = (id) => {
                setOpenComments(prev => ({
                    ...prev,
                    [id]: !prev[id]
                }));
            };
            
            const handleCommentSubmit = async (confessionId) => {
                const commentText = commentInputs[confessionId];
                if (!commentText || !commentText.trim()) return;
                
                try {
                    const commentsRef = database.ref(`confessions/${confessionId}/comments`);
                    const newCommentRef = commentsRef.push();
                    await newCommentRef.set({
                        nickname: 'ìµëª…',
                        content: commentText.trim(),
                        timestamp: Date.now()
                    });
                    
                    setCommentInputs(prev => ({
                        ...prev,
                        [confessionId]: ''
                    }));
                } catch (error) {
                    console.error('ëŒ“ê¸€ ì‘ì„± ì‹¤íŒ¨:', error);
                    alert('ëŒ“ê¸€ ì‘ì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            };
            
            const getCommentCount = (confession) => {
                if (!confession.comments) return 0;
                return Object.keys(confession.comments).length;
            };
            
            const formatTime = (timestamp) => {
                if (!timestamp) return 'ë°©ê¸ˆ ì „';
                
                const date = new Date(timestamp);
                const now = new Date();
                const diff = now - date;
                
                if (diff < 60000) return 'ë°©ê¸ˆ ì „';
                if (diff < 3600000) return `${Math.floor(diff / 60000)}ë¶„ ì „`;
                if (diff < 86400000) return `${Math.floor(diff / 3600000)}ì‹œê°„ ì „`;
                return `${date.getMonth() + 1}ì›” ${date.getDate()}ì¼`;
            };
            
            // ê²Œì„ í•¨ìˆ˜ë“¤
            const showGameHint = () => {
                if (gameHints >= 3) {
                    alert("ë” ì´ìƒ íŒíŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤!");
                    return;
                }
                const hints = gameHintData[gameStage];
                alert("ğŸ’¡ íŒíŠ¸: " + hints[gameHints]);
                setGameHints(gameHints + 1);
            };
            
            const checkGameAnswer = () => {
                const answer = gameAnswer.trim().toLowerCase();
                const correctAnswer = gameAnswers[gameStage].toLowerCase();
                
                if (answer === correctAnswer) {
                    if (gameStage < 5) {
                        setGameItems([...gameItems, gameStages[gameStage].title]);
                        setGameStage(gameStage + 1);
                        setGameHints(0);
                        setGameAnswer('');
                        setGameMessage({ text: "ì •ë‹µì…ë‹ˆë‹¤! ë‹¤ìŒ ë‹¨ê³„ë¡œ...", type: "success" });
                        setTimeout(() => setGameMessage({ text: '', type: '' }), 1500);
                    } else {
                        setGameCompleted(true);
                    }
                } else {
                    setGameMessage({ text: "âŒ í‹€ë ¸ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ìƒê°í•´ë³´ì„¸ìš”!", type: "error" });
                    setGameAnswer('');
                    setTimeout(() => setGameMessage({ text: '', type: '' }), 3000);
                }
            };
            
            const resetGame = () => {
                setGameStage(1);
                setGameHints(0);
                setGameItems([]);
                setGameAnswer('');
                setGameMessage({ text: '', type: '' });
                setGameCompleted(false);
            };
            
            if (!passwordVerified) {
                return (
                    <div className="password-overlay">
                        <div className="password-box">
                            <h2>ğŸ” ì¸ì¦</h2>
                            <p className="password-hint">íŒíŠ¸: ì˜µë¹ </p>
                            <input
                                type="password"
                                className="password-input"
                                placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥"
                                value={passwordInput}
                                onChange={(e) => setPasswordInput(e.target.value)}
                                onKeyPress={(e) => {
                                    if (e.key === 'Enter') {
                                        handlePasswordSubmit();
                                    }
                                }}
                                maxLength={10}
                                autoFocus
                            />
                            <button 
                                className="password-submit"
                                onClick={handlePasswordSubmit}
                            >
                                ì…ì¥í•˜ê¸° â†’
                            </button>
                            <div className="password-error">{passwordError}</div>
                        </div>
                    </div>
                );
            }
            
            if (isLoading) {
                return (
                    <div className="container">
                        <div className="loading">â³ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
                    </div>
                );
            }
            
            return (
                <div className="container">
                    {showToast && (
                        <div className="success-toast">
                            âœ… ê²Œì‹œê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!
                        </div>
                    )}
                    
                    <header className="header">
                        <h1>ğŸ“‹ ìµëª… ê²Œì‹œíŒ</h1>
                        <p>ììœ ë¡­ê²Œ ì˜ê²¬ì„ ë‚˜ëˆ ë³´ì„¸ìš”</p>
                    </header>
                    
                    <div className="tab-navigation">
                        <button 
                            className={`tab-btn ${activeTab === 'board' ? 'active' : ''}`}
                            onClick={() => setActiveTab('board')}
                        >
                            ğŸ“ ê²Œì‹œíŒ
                        </button>
                        <button 
                            className={`tab-btn ${activeTab === 'game' ? 'active' : ''}`}
                            onClick={() => setActiveTab('game')}
                        >
                            ğŸ® ë°©íƒˆì¶œ
                        </button>
                    </div>
                    
                    {activeTab === 'board' ? (
                        <>
                            <div className="stats">
                                <div className="stat-item">
                                    <div className="stat-number">{confessions.length}</div>
                                    <div className="stat-label">ì „ì²´ ê²Œì‹œê¸€</div>
                                </div>
                                <div className="stat-item">
                                    <div className="stat-number">
                                        {confessions.reduce((sum, c) => 
                                            sum + (c.reactions?.hug || 0) + (c.reactions?.cheer || 0) + (c.reactions?.sad || 0), 0
                                        )}
                                    </div>
                                    <div className="stat-label">ì´ ë°˜ì‘</div>
                                </div>
                            </div>
                            
                            <div className="form-card">
                                <h2>âœï¸ ê¸€ ì‘ì„±í•˜ê¸°</h2>
                                
                                <input 
                                    type="text"
                                    className="nickname-input"
                                    placeholder="ë‹‰ë„¤ì„ (ì„ íƒì‚¬í•­)"
                                    value={nickname}
                                    onChange={(e) => setNickname(e.target.value)}
                                    maxLength={20}
                                />
                                
                                <select 
                                    className="category-select"
                                    value={category}
                                    onChange={(e) => setCategory(e.target.value)}
                                >
                                    {categories.map(cat => (
                                        <option key={cat} value={cat}>{cat}</option>
                                    ))}
                                </select>
                                
                                <textarea
                                    placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..."
                                    value={content}
                                    onChange={(e) => setContent(e.target.value)}
                                    maxLength={500}
                                />
                                
                                <div className="char-count">{content.length} / 500</div>
                                
                                <button 
                                    className="submit-btn"
                                    onClick={handleSubmit}
                                    disabled={!content.trim()}
                                >
                                    ê²Œì‹œí•˜ê¸° â†’
                                </button>
                            </div>
                            
                            <section className="confessions-section">
                                <h2>ğŸ“ ê²Œì‹œê¸€ ëª©ë¡</h2>
                                
                                {confessions.length === 0 ? (
                                    <div className="empty-state">
                                        ì•„ì§ ë“±ë¡ëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.<br/>
                                        ì²« ë²ˆì§¸ ê¸€ì„ ì‘ì„±í•´ë³´ì„¸ìš”! âœï¸
                                    </div>
                                ) : (
                                    confessions.map(confession => (
                                        <div key={confession.id} className="confession-card">
                                            <div className="confession-header">
                                                <span className="confession-nickname">
                                                    {confession.nickname}
                                                    <span className="category-tag">{confession.category}</span>
                                                </span>
                                                <span className="confession-time">
                                                    {formatTime(confession.timestamp)}
                                                </span>
                                            </div>
                                            <div className="confession-content">
                                                {confession.content}
                                            </div>
                                            <div className="confession-footer">
                                                <button 
                                                    className="reaction-btn"
                                                    onClick={() => handleReaction(confession.id, 'hug')}
                                                >
                                                    ğŸ¤— {confession.reactions?.hug || ''}
                                                </button>
                                                <button 
                                                    className="reaction-btn"
                                                    onClick={() => handleReaction(confession.id, 'cheer')}
                                                >
                                                    ğŸ’ª {confession.reactions?.cheer || ''}
                                                </button>
                                                <button 
                                                    className="reaction-btn"
                                                    onClick={() => handleReaction(confession.id, 'sad')}
                                                >
                                                    ğŸ˜¢ {confession.reactions?.sad || ''}
                                                </button>
                                                <button 
                                                    className="comment-btn"
                                                    onClick={() => toggleComments(confession.id)}
                                                >
                                                    ğŸ’¬ ëŒ“ê¸€ {getCommentCount(confession) > 0 ? `(${getCommentCount(confession)})` : ''}
                                                </button>
                                            </div>
                                            
                                            {openComments[confession.id] && (
                                                <div className="comments-section">
                                                    <div className="comment-input-box">
                                                        <input
                                                            type="text"
                                                            className="comment-input"
                                                            placeholder="ë”°ëœ»í•œ ëŒ“ê¸€ì„ ë‚¨ê²¨ì£¼ì„¸ìš”..."
                                                            value={commentInputs[confession.id] || ''}
                                                            onChange={(e) => setCommentInputs({
                                                                ...commentInputs,
                                                                [confession.id]: e.target.value
                                                            })}
                                                            onKeyPress={(e) => {
                                                                if (e.key === 'Enter') {
                                                                    handleCommentSubmit(confession.id);
                                                                }
                                                            }}
                                                            maxLength={200}
                                                        />
                                                        <button
                                                            className="comment-submit-btn"
                                                            onClick={() => handleCommentSubmit(confession.id)}
                                                            disabled={!commentInputs[confession.id]?.trim()}
                                                        >
                                                            ì‘ì„±
                                                        </button>
                                                    </div>
                                                    
                                                    <div className="comment-list">
                                                        {confession.comments ? (
                                                            Object.keys(confession.comments)
                                                                .map(commentId => ({
                                                                    id: commentId,
                                                                    ...confession.comments[commentId]
                                                                }))
                                                                .sort((a, b) => a.timestamp - b.timestamp)
                                                                .map(comment => (
                                                                    <div key={comment.id} className="comment-item">
                                                                        <div className="comment-header">
                                                                            <span className="comment-nickname">{comment.nickname}</span>
                                                                            <span className="comment-time">{formatTime(comment.timestamp)}</span>
                                                                        </div>
                                                                        <div className="comment-content">{comment.content}</div>
                                                                    </div>
                                                                ))
                                                        ) : (
                                                            <div className="no-comments">ì²« ëŒ“ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”! ğŸ’­</div>
                                                        )}
                                                    </div>
                                                </div>
                                            )}
                                        </div>
                                    ))
                                )}
                            </section>
                        </>
                    ) : (
                        <div className="game-container">
                            <div className="game-header">
                                <h2>ğŸ¥ ì„¸ì¸íŠ¸ ë©”ë¦¬ ì •ì‹ ë³‘ì› ğŸ¥</h2>
                                <p style={{fontSize: '0.9rem', opacity: '0.8', marginTop: '8px'}}>
                                    1987ë…„ 10ì›” 31ì¼ì˜ ë¹„ë°€ì„ ë°í˜€ë¼
                                </p>
                            </div>
                            
                            {!gameCompleted ? (
                                <>
                                    <div className="stage-info">
                                        <div className="stage-number">{gameStages[gameStage].title}</div>
                                        <div style={{color: '#64c8ff', fontSize: '0.9rem', marginTop: '8px'}}>
                                            ğŸ’¡ ì‚¬ìš©í•œ íŒíŠ¸: {gameHints}/3
                                        </div>
                                    </div>
                                    
                                    <div 
                                        className="room-description"
                                        dangerouslySetInnerHTML={{ __html: gameStages[gameStage].description }}
                                    />
                                    
                                    {gameMessage.text && (
                                        <div className={`game-message ${gameMessage.type}`}>
                                            {gameMessage.text}
                                        </div>
                                    )}
                                    
                                    <div className="puzzle-box">
                                        <div className="puzzle-title">ğŸ§© í¼ì¦</div>
                                        <div className="game-clue">
                                            ğŸ’­ ë‹¨ì„œ: {gameStages[gameStage].clue}
                                        </div>
                                        <div style={{marginTop: '15px'}}>
                                            <label style={{display: 'block', marginBottom: '10px', color: '#ffd700'}}>
                                                {gameStages[gameStage].question}
                                            </label>
                                            <input
                                                type="text"
                                                className="game-input"
                                                placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”..."
                                                value={gameAnswer}
                                                onChange={(e) => setGameAnswer(e.target.value)}
                                                onKeyPress={(e) => {
                                                    if (e.key === 'Enter') checkGameAnswer();
                                                }}
                                            />
                                            <button className="game-btn" onClick={checkGameAnswer}>
                                                í™•ì¸í•˜ê¸° ğŸ”
                                            </button>
                                        </div>
                                        <div style={{textAlign: 'center', marginTop: '15px'}}>
                                            <button className="hint-btn" onClick={showGameHint}>
                                                ğŸ’¡ íŒíŠ¸ ë³´ê¸° ({gameHints}/3)
                                            </button>
                                        </div>
                                    </div>
                                    
                                    {gameItems.length > 0 && (
                                        <div style={{marginTop: '20px'}}>
                                            <h3 style={{color: '#ffd700', marginBottom: '10px', fontSize: '1.1rem'}}>
                                                ğŸ” ìˆ˜ì§‘í•œ ì¦ê±°:
                                            </h3>
                                            <div className="items-found">
                                                {gameItems.map((item, idx) => {
                                                    const evidence = gameStages[idx + 1]?.evidence;
                                                    return (
                                                        <div key={idx} className="item" style={{textAlign: 'left'}}>
                                                            {evidence || `âœ… ${item}`}
                                                        </div>
                                                    );
                                                })}
                                            </div>
                                            <div style={{
                                                marginTop: '15px', 
                                                padding: '10px', 
                                                background: 'rgba(100, 200, 255, 0.1)',
                                                borderRadius: '8px',
                                                border: '1px solid #64c8ff',
                                                fontSize: '0.9rem',
                                                color: '#64c8ff'
                                            }}>
                                                ğŸ’¡ ì§„í–‰ë„: {gameStage}/5 ë‹¨ê³„ | ì¦ê±°: {gameItems.length}/4ê°œ
                                            </div>
                                        </div>
                                    )}
                                </>
                            ) : (
                                <div className="completion">
                                    <h3>ğŸ•¯ï¸ ì§„ì‹¤ì´ ë°í˜€ì¡ŒìŠµë‹ˆë‹¤ ğŸ•¯ï¸</h3>
                                    <p style={{fontSize: '1.1rem', margin: '15px 0', lineHeight: '1.6'}}>
                                        ë‹¹ì‹ ì€ ìœŒë¦¬ì—„ í—¤ì´ìŠ¤íŒ…ìŠ¤ ë°•ì‚¬ë¥¼ ì§€ëª©í–ˆìŠµë‹ˆë‹¤.<br/>
                                        <span style={{color: '#ff6b6b'}}>ê·¸ê°€ ì¸ì •í–ˆìŠµë‹ˆë‹¤.</span><br/><br/>
                                        
                                        "ë§ì•„ìš”... ë‚˜ëŠ” ê·¸ë“¤ì„ ì‹¤í—˜ ëŒ€ìƒìœ¼ë¡œ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.<br/>
                                        ì •ì‹ ì§ˆí™˜ ì¹˜ë£Œì œ ê°œë°œì´ë¼ëŠ” ëª…ë¶„ìœ¼ë¡œ...<br/>
                                        í•˜ì§€ë§Œ ë‹¹ì‹ ì˜ ì¹œêµ¬ëŠ” ì•„ì§ ì‚´ì•„ìˆì–´ìš”.<br/>
                                        ì§€í•˜ 3ì¸µ, ê²©ë¦¬ì‹¤ì—..."
                                    </p>
                                    <div style={{color: '#ffd700', margin: '15px 0'}}>
                                        â±ï¸ ì†Œìš” ì‹œê°„: {Math.floor((Date.now() - gameStartTime) / 60000)}ë¶„ {Math.floor(((Date.now() - gameStartTime) % 60000) / 1000)}ì´ˆ
                                    </div>
                                    <div className="items-found" style={{marginTop: '20px'}}>
                                        <div className="item">ğŸ“‹ ì¦ê±° ìˆ˜ì§‘ ì™„ë£Œ</div>
                                        <div className="item">ğŸ” ë²”ì¸ ìƒ‰ì¶œ</div>
                                        <div className="item">ğŸ¯ ë¯¸ìŠ¤í„°ë¦¬ í•´ê²°</div>
                                    </div>
                                    <p style={{marginTop: '20px', fontSize: '0.95rem', lineHeight: '1.6', color: '#aaa'}}>
                                        "ì§„ì‹¤ì€ í•­ìƒ ì–´ë‘  ì†ì— ìˆ¨ì–´ìˆë‹¤.<br/>
                                        í•˜ì§€ë§Œ ìš©ê¸° ìˆëŠ” ìë§Œì´ ê·¸ê²ƒì„ ë°í˜€ë‚¼ ìˆ˜ ìˆë‹¤."<br/><br/>
                                        <span style={{fontSize: '0.85rem'}}>
                                        ë‹¹ì‹ ì˜ ì¹œêµ¬ëŠ” ë¬´ì‚¬íˆ êµ¬ì¶œë˜ì—ˆê³ ,<br/>
                                        ìœŒë¦¬ì—„ ë°•ì‚¬ëŠ” ë²•ì˜ ì‹¬íŒì„ ë°›ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.<br/>
                                        í•˜ì§€ë§Œ ë³‘ì›ì˜ ë¹„ë°€ì´ ì „ë¶€ ë°í˜€ì§„ ê²ƒì¼ê¹Œìš”?
                                        </span>
                                    </p>
                                    <button 
                                        className="game-btn" 
                                        onClick={resetGame}
                                        style={{marginTop: '20px', maxWidth: '300px', margin: '20px auto'}}
                                    >
                                        ğŸ”„ ë‹¤ì‹œ ë„ì „í•˜ê¸°
                                    </button>
                                </div>
                            )}
                        </div>
                    )}
                </div>
            );
        }
        
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
